var ShoppingApp=function(){var e=[],t=function(t){e.push(t),n.init(),u.init(),i.init(),u.getUser(),i.getFriends(),i.getFriendsRequest()},n=function(){var e=function(){t()},t=function(){$("#responsive-menu-button").sidr(),$("li a").click(function(){$.sidr("close","sidr"),$("#simple-menu").show()}),$("#simple-menu").click(function(){$("#simple-menu").hide()}),$("#menu-close-btn").click(function(){$("#simple-menu").show()}),$(".tabs .tab-links a").on("click",function(e){var t=$(this).attr("href");$(".tabs "+t).show().siblings().hide(),$(this).parent("li").addClass("active").siblings().removeClass("active"),e.preventDefault()}),$(window).touchwipe({wipeLeft:function(){$.sidr("close","sidr")},wipeRight:function(){$.sidr("open","sidr")},preventDefaultEvents:!1})};return{init:e}}(),u=function(){var t=function(){n()},n=function(){$("#update-user-form").submit(function(e){$("#update");u().done(function(){}).always(function(){s(),a(),$("#update").val("edit").removeAttr("disabled")}),e.preventDefault()}),$(document).on("click","#update",function(){"submit"===document.getElementById("update").type?(document.getElementById("update").type="button",document.getElementById("update").value="Update",document.getElementById("first-name").disabled=!1,document.getElementById("last-name").disabled=!1,document.getElementById("country").disabled=!1,document.getElementById("email").disabled=!1):"button"===document.getElementById("update").type&&(document.getElementById("update").type="submit")})},u=function(){return $.ajax({url:e[0].url+e[0].userId,type:"put",dataType:"text",cache:!1,async:!0,data:$("#update-user-form").serialize()})},i=function(){return $.ajax({url:e[0].url+e[0].userId,type:"GET",dataType:"json",cache:!1,async:!0})},a=function(){document.getElementById("first-name").disabled=!0,document.getElementById("last-name").disabled=!0,document.getElementById("country").disabled=!0,document.getElementById("email").disabled=!0},s=function(){return i().done(function(e){$("#first-name").val(e.firstName),$("#last-name").val(e.lastName),$("#country").val(e.country),$("#email").val(e.email)})};return{init:t,getUser:s}}(),i=function(){var t=function(){n()},n=function(){$("#search-users").keyup(function(e){var t=$(this).val();t.length>=3?a(t).done(function(e){var t=$("#results").html("");0===e.length&&$(t).append("<tr><td>User not found</td></tr>"),e.forEach(function(e){$(t).append("<p>"+e.firstName+" "+e.lastName+"<br>"+e.email+'</p> <button id="add-friend-btn" type="submit" value="'+e.userId+'">Add friend</button>')})}):$("#results").html("")}),$(document).on("click","#accept-request-btn",function(){var e=$(this).attr("value");s(e).done(function(e){var t=$("#request-friend-message").html("");t.append(e),setTimeout(function(){t.fadeOut("slow"),t.empty()},2800),c(),o()})}),$(document).on("click","#decline-request-btn",function(){var e=$(this).attr("value");r(e).done(function(e){o(),c()})}),$(document).on("click","#add-friend-btn",function(){var e=$(this).attr("value");d(e).done(function(e){var t=$("#add-friend-message").html("");t.append(e),setTimeout(function(){t.fadeOut("slow"),t.empty()},2800),o()})})},u=function(){return $.ajax({url:e[0].url+"friends/"+e[0].userId,type:"GET",dataType:"json",cache:!1,async:!0})},i=function(){return $.ajax({url:e[0].url+"friends/requests/"+e[0].userId,type:"GET",dataType:"json",cache:!1,async:!0})},a=function(t){return $.ajax({url:e[0].url+"friends/search/"+t,type:"GET",dataType:"json",cache:!1,async:!0})},s=function(t){return $.ajax({url:e[0].url+"friends/requests/"+e[0].userId+"/"+t+"/",type:"PUT",dataType:"json",cache:!1,async:!0})},r=function(t){return $.ajax({url:e[0].url+"friends/requests/"+e[0].userId+"/"+t+"/",type:"DELETE",dataType:"json",cache:!1,async:!0})},d=function(t){return $.ajax({url:e[0].url+"friends/requests/"+e[0].userId+"/"+t+"/",type:"POST",dataType:"text",cache:!1,async:!0})},c=function(){return u().done(function(e){$("#friends-list").html(""),e.forEach(function(e){$("#friends-list").append("<p>"+e.firstName+" "+e.lastName+'</p><button id="decline-request-btn" type="submit" value="'+e.userId+'">Delete Friend</button>')})})},o=function(){return i().done(function(e){$("#friends-requests-list").html("");var t=$("#requests").html(""),n=0;e.forEach(function(e){$("#friends-requests-list").append("<p>"+e.firstName+" "+e.lastName+'<br><button id="accept-request-btn" type="submit" value="'+e.userId+'">accept</button><button id="decline-request-btn" type="submit" value="'+e.userId+'">decline</button> </p>'),n++}),t.append(0===n?"no friend requests":"You have "+n+" friend requests")})};return{init:t,getFriends:c,getFriendsRequest:o}}();return{init:t}}();